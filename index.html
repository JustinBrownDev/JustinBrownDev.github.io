<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Justin's Playground site</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hack-font@3/build/web/hack.css">

    <script src="https://cdn.jsdelivr.net/npm/jsrsasign@10.5.23/lib/jsrsasign-all-min.js"></script>
    
    
    <!-- For JWT creation -->
    <script>
        const serviceAccountEmail = 'sheets-api@rent-with-jacob.iam.gserviceaccount.com'; // Replace with your service account email
        const privateKey = "-----BEGIN PRIVATE KEY-----\nMIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQC0bnXcyPRk63oV\nIngopT57s7JyyBKhqiBl5p2X0VimgAq9VGXbXZ+Z9L9ndxwMcSOtdRqxojV51Qw4\nUrjy5GgLjpjYNfb3yuZ+Eo9r9c6//3JHigvvyMbL2bB97wq0YkcPqx5yhcC2O4+m\nK9P83zRLylKCZgluoH2BTD2pbFC6bUveVVYmq78ltmKqGN7XEX3zTomB5L4mXV6D\nGfvz/Mbu5Rl3sz7Tv6QHNDd/SabBwYbk+A2NpW9VOLfPPJG+1Ki2kZIwdrJ0S8Wp\nOKnXqoG8zxJtfWKqWJsX8D24ipmbpSeygMGO7C3Mq3G2okciI0pXpVw9gcdEaT0i\nPxnwqt+LAgMBAAECggEABPmSuF62Fl5DxHdp1r0PpvuCbRXFJb36HLUqHTiBeD3J\njgTYth6zutv7tw+ar2EjObIj5Ufyr4RHTPpC7TeNAtyQrE14nMZ0an96guCJLdQO\nQ5iz0Y24pYBAFIjVw7l9+hmewkubz6p+wHcu5icFWx2d/shvdCRqsXj3rkc1Rp6W\n9HZA8Gcjzg2xry+L9wKcWcK52x3M7+aXeX7gQf/h7BuUufCG5IPixfNLW3cpdcPj\n+wv7B6KZCiDyLCgbgwulYzAEJq7pwWw45JRQqP2njbwSqZ6EKpnr98S0qGBlCTAN\njYwHDG0U4KoyEXxQGGXgPdAxFpXWC8c+sec8w1FHWQKBgQDsGair11nyvukGeCW1\nqDDiZGhdqG5huV26VAQoxh8BgYazwsGUYyt0tIRGMpux0d8mjJgvYScrxVNPz/ql\nxe8QimWll60tHMxkgDccyMvraMMNreL9HdZA++PXHMtQhHhkA/ac4IPIy3IlvTra\nbLlRuUp1FoZtXwmBKVonMJ/lhwKBgQDDo6KxBF0+j6yr1NbOJrh2q8oIdDdPSuwt\n4EQvtUi+fJkSnRt7imT3q10pt/4nPZy1yCia7zPKeM5Fai3+OebO4ZhlfCkWOVMi\nJQKCP2sMSQyrrks7mPa5o9DWqKHCa5kt/e9amAFbQ/DMg+eOCtiGngKn21cQkJ0C\nyXGs09723QKBgEEKWILuUmMi4ILdulWuvbjAPFgAvFfDfuSDnJm26ne5vOfscPN1\n1lTSHdZQvr9ft3+hH5N9yhKuy2KjQsNEIbWGyrWxcQ2Kb2wIPiZ50mNJeuJb0roz\n6//+5CcwUXoe5CN5TAiveN5p3Uo0NPBTH0I6Lx7OU73xfmbMg39kT8glAoGAHfZQ\ns1WcxjkQ09wr7bSmaZ5Tucm6ss0hsMD5EGluM6Y3d09SZzBB2GCJSxtftDjOaFS4\nS0o5H1gzFxR06MuLWsHYKirCzCGJZuBOKw51YZNKenyeDwmVN8cr88Qtye3art2G\nK9S92HFmTpwg+XMVyEAo3fZMtj+/nC6n1zU3n40CgYEA529qitCxcQhWxt9yuUbm\neu7neR/RIuSfuXaySinhmxsO0G844wf4VJ+MsUzONa3JxNVtiOyvX8BGen6JfX5H\nOt7xPcExkTGZh6t/jX6ec9QvzpIudCS6YmZKCzBTbcXND1XlqQrhIge2pMLR3Lzf\n+IuFC1SqWo+0fKIefMXZQsE=\n-----END PRIVATE KEY-----\n"; // Replace with your private key
        const spreadsheetId = '1KFOoEyzY5r6-hyeLrp4mQfHCDQrjURgFI1nw0oFCX-k'; // Replace with your spreadsheet ID
        const scope = 'https://www.googleapis.com/auth/spreadsheets';

        // JWT Generation Function
        function generateJWT() {
            const header = {
                alg: "RS256",
                typ: "JWT"
            };

            const now = Math.floor(Date.now() / 1000);
            const payload = {
                iss: serviceAccountEmail,
                scope: scope,
                aud: "https://oauth2.googleapis.com/token",
                iat: now,
                exp: now + 3600,
            };

            const jwt = KJUR.jws.JWS.sign(
                null,
                JSON.stringify(header),
                JSON.stringify(payload),
                privateKey
            );

            return jwt;
        }
        function openWebsite(baseUrl, textboxId, extra_whatever) {
            // Get the extension from the textbox
            const extension = document.getElementById(textboxId).value;
            logButtonPress(textboxId, extension, extra_whatever)
            // Open the base URL with the extension in a new tab
            const fullUrl = baseUrl + extension;
            window.open(fullUrl, '_blank');
        }
        // Function to get Access Token using JWT
        async function getAccessToken() {
            const jwt = generateJWT();

            const response = await fetch('https://oauth2.googleapis.com/token', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded'
                },
                body: new URLSearchParams({
                    grant_type: 'urn:ietf:params:oauth:grant-type:jwt-bearer',
                    assertion: jwt
                })
            });

            const data = await response.json();
            return data.access_token;
        }

        // Function to log button press to Google Sheets
        async function logButtonPress(data1, data2, data3) {
            const accessToken = await getAccessToken();

            const range = 'Sheet1!A:D'; // The range where you want to log the button press
            const timestamp = new Date().toISOString();
            const values = [[timestamp, data1, data2, data3]];

            const response = await fetch(`https://sheets.googleapis.com/v4/spreadsheets/${spreadsheetId}/values/${range}:append?valueInputOption=USER_ENTERED`, {
                method: 'POST',
                headers: {
                    'Authorization': `Bearer ${accessToken}`,
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    values: values
                })
            });

            const result = await response.json();
            console.log('Button press logged:', result);
        }
    </script>
</head>

<body style="background-color:#050505; color:#04ff08; font-family: 'Hack', monospace;">
    <table border="0" style="width: 80%; position: relative; margin: auto;">
        <thead>
            <tr>
                <th>
                    <div>
                        <h1>Target Analysis Helper Site</h1>
                        <p>skibidi target</p>
                        <div style="height: 10px;"></div>






                    </div>
                </th>
                <th>
                    <h1>
                        helpful data:
                    </h1>
                    <div style="height: 10px;"></div>
                </th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td style="font-size: medium; text-align: center;">

                  <div style="height: 10px;"></div>

                  <label for="bgpTools" style="display: inline;">
                      <span>
                          ASN's ( BGPtools )
                          <input type="text" id="bgpTools" placeholder="input field"
                          style="background-color:#101010; color:#00ff00" onsubmit="openWebsite('https://bgp.tools/as/', 'bgpTools','None')">
                      <button onclick="openWebsite('https://bgp.tools/as/', 'bgpTools','None')"
                          style="background-color:#101010; color:#00ff00">search</button>
  
                      </span>
                  </label>
                  <div style="height: 3px;"></div>
                  <div style="color:white"> Only include the number, no 'AS'</div>
                  
                  <br>
                </td>
                <td style="font-size: medium; text-align: center;">
                  <div id="output_text"></div>
                </td>
            </tr>
        </tbody>
    </table>

    <script>
function observeDOMChanges() {

    // Create a callback function to execute when mutations are detected
    const callback = function(mutationsList) {
        for (let mutation of mutationsList) {
            if (mutation.target.className === "de1") {
                document.getElementById('output_text').textContent = mutation.target.textContent
                document.getElementsByClassName("embedPastebin")[0].remove()
            }
        }
    };

    // Create a new MutationObserver instance
    const observer = new MutationObserver(callback);

    // Start observing the target node
    observer.observe(document.body.getRootNode(), {
  subtree: true,
  childList: true,
});
}

// Call the function to start observing
observeDOMChanges();
    </script>
    <script src="https://pastebin.com/embed_js/AFKdtsY0"></script>


</body>

</html>
